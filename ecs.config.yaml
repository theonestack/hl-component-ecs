maximum_availability_zones: 5

# cluster name is prefixed with environment name
# cluster_name: cluster

component_version: 0.0.1
log_group_retention: 14

enable_efs: false

security_groups:
  -
    Description: 'Ephemeral port range for ECS'
    IpProtocol: 'tcp'
    FromPort: '32768'
    ToPort: '65535'
    SourceSecurityGroup: SecurityGroupLoadBalancer
  -
    Description: 'SSH access from bastion'
    IpProtocol: 'tcp'
    FromPort: '22'
    SourceSecurityGroup: SecurityGroupBastion


iam_policies:
  ecs-container-instance:
    action:
      - ecs:CreateCluster
      - ecs:DeregisterContainerInstance
      - ecs:DiscoverPollEndpoint
      - ecs:Poll
      - ecs:RegisterContainerInstance
      - ecs:StartTelemetrySession
      - ecs:Submit*
      - ecr:GetAuthorizationToken
      - ecr:BatchCheckLayerAvailability
      - ecr:GetDownloadUrlForLayer
      - ecr:BatchGetImage
      - logs:CreateLogStream
      - logs:PutLogEvents
  ecs-service-scheduler:
    action:
      - ec2:AuthorizeSecurityGroupIngress
      - ec2:Describe*
      - elasticloadbalancing:DeregisterInstancesFromLoadBalancer
      - elasticloadbalancing:DeregisterTargets
      - elasticloadbalancing:Describe*
      - elasticloadbalancing:RegisterInstancesWithLoadBalancer
      - elasticloadbalancing:RegisterTargets
